var arr=[];$.getJSON("claro"==window.location.search.split("server=")[1]?"servers-claro.json":"servers.json",r=>{if(r)for(r.forEach((r,e)=>{"BR"==r.cc&&($(".servers.container").append(`<div class="server box" server-id="${r.id}"><div class="server name">${r.sponsor.replace("-","")}</div><div class="server location">${r.name}</div><div class="server latency" style="background:#ffb2b4">? ms</div></div>`),arr[e]={reconnect:0,func:function(){var s,n=new WebSocket(`wss://${r.host}/ws`),a=!1;n.onopen=function(){arr[e].reconnect=0,setInterval(function(){1!=a&&(a=!0,s=Date.now(),n.send("PING "+s))},500)},n.onerror=function(){$(`.server.box[server-id="${r.id}"] .server.latency`).text("? ms").css("background","#ffb2b4"),arr[e].reconnect++,arr[e].reconnect<=5?arr[e].func():$(`.server.box[server-id="${r.id}"] .server.latency`).css("background","#ff8589")},n.onclose=function(){$(`.server.box[server-id="${r.id}"] .server.latency`).text("? ms").css("background","#ffb2b4"),arr[e].reconnect++,arr[e].reconnect<=5?arr[e].func():$(`.server.box[server-id="${r.id}"] .server.latency`).css("background","#ff8589")},n.onmessage=function(e){if(e.data.match("PONG")){var n=Date.now()-s;$(`.server.box[server-id="${r.id}"] .server.latency`).text(`${n} ms`).css("background",n>100?"#ffb2b4":n>50?"#ffe8bd":"#fff"),a=!1}}}})}),i=0;i<arr.length;i++)arr[i].func();else alert("Erro ao carregar a lista de servidores.")}).fail(()=>{alert("Erro ao carregar a lista de servidores.")});