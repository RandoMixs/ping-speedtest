var arr=[];$.getJSON("servers.json",r=>{if(r)for(r.forEach((r,e)=>{"BR"==r.cc&&($(".servers.container").append('<div class="server box" server-id="'+r.id+'"><div class="server name">'+r.sponsor.replace("-","")+'</div><div class="server location">'+r.name+'</div><div class="server latency">0 ms</div></div>'),arr[e]=function(){var s,a=new WebSocket("wss://"+r.host+"/ws"),n=!1;a.onopen=function(){setInterval(function(){1!=n&&(n=!0,s=Date.now(),a.send("PING "+s))},500)},a.onerror=function(){$('.server.box[server-id="'+r.id+'"] .server.latency').text("? ms").css("background","#ffb2b4"),arr[e]()},a.onclose=function(){$('.server.box[server-id="'+r.id+'"] .server.latency').text("? ms").css("background","#ffb2b4"),arr[e]()},a.onmessage=function(e){if(e.data.match("PONG")){var a=Date.now()-s;$('.server.box[server-id="'+r.id+'"] .server.latency').text(a+" ms").css("background",a>100?"#ffb2b4":a>50?"#ffe8bd":"#fff"),n=!1}}})}),i=0;i<arr.length;i++)arr[i]();else alert("Erro ao carregar a lista de servidores.")}).fail(()=>{alert("Erro ao carregar a lista de servidores.")});